namespace = aiu_event

# Avenge the Pope
country_event = {
	id = aiu_event.1
	title = "AIU_EVENT.1"
	desc = "AIU_EVENT_DESC.1"
	picture = PRINCE_BISHOP_RESIGN_eventPicture
	
	is_triggered_only = yes

	option = {
		name = "AIU_EVENT.1A" #For the Pope!
		add_country_modifier = {
			name = AIU_papal_avenge
			duration = 3650
		}
		set_country_flag = AIU_avenge_the_pope
		ai_chance = { 
			factor = 100
		}
	}
}
#Failed the Pope
country_event = {
	id = aiu_event.2
	title = "AIU_EVENT.2"
	desc = "AIU_EVENT_DESC.2"
	picture = PRINCE_BISHOP_RESIGN_eventPicture

	trigger = {
		has_country_flag = AIU_avenge_the_pope
		OR = {
			NOT = { exists = PAP }
			PAP = { is_subject = yes }
		}
		is_at_war = no
	}
	option = {
		name = "AIU_EVENT.2A" #We have failed the Pope
		remove_country_modifier = AIU_papal_avenge
		add_country_modifier = {
			name = AIU_papal_fail 
			duration = 3650
		}
		clr_country_flag = AIU_avenge_the_pope
		ai_chance = { 
			factor = 100
		}
	}
}
#Liberated the Pope
country_event = {
	id = aiu_event.3
	title = "AIU_EVENT.3"
	desc = "AIU_EVENT_DESC.3"
	picture = POPE_PREACHING_eventPicture

	trigger = {
		has_country_flag = AIU_avenge_the_pope
		exists = PAP
		PAP = { is_subject = no }
		is_at_war = no
	}
	option = {
		name = "AIU_EVENT.3A" #Glory to God!
		remove_country_modifier = AIU_papal_avenge
		add_prestige = 50
		clr_country_flag = AIU_avenge_the_pope
		ai_chance = { 
			factor = 100
		}
	}
}
# The Great Italianization
country_event = {
	id = aiu_event.4
	title = "AIU_EVENT.4"
	desc = "AIU_EVENT_DESC.4"
	picture = CONQUEST_eventPicture
	
	is_triggered_only = yes

	option = {
		name = "AIU_EVENT.4A" #Accept the Italians
		add_country_modifier = {
			name = AIU_iberian_italian_union 
			duration = -1
		}
		if = {	
			limit = {
				NOT = { accepted_culture = lombard }
			}
			add_accepted_culture = lombard
		}
		if = {	
			limit = {
				NOT = { accepted_culture = tuscan }
			}
			add_accepted_culture = tuscan 
		}
		if = {	
			limit = {
				NOT = { accepted_culture = sardinian }
			}
			add_accepted_culture = sardinian 
		}
		if = {	
			limit = {
				NOT = { accepted_culture = romagnan }
			}
			add_accepted_culture = romagnan 
		}
		if = {	
			limit = {
				NOT = { accepted_culture = ligurian }
			}
			add_accepted_culture = ligurian 
		}
		if = {	
			limit = {
				NOT = { accepted_culture = ligurian }
			}
			add_accepted_culture = ligurian 
		}
		if = {	
			limit = {
				NOT = { accepted_culture = venetian }
			}
			add_accepted_culture = venetian 
		}
		if = {	
			limit = {
				NOT = { accepted_culture = dalmatian }
			}
			add_accepted_culture = dalmatian 
		}
		if = {	
			limit = {
				NOT = { accepted_culture = dalmatian }
			}
			add_accepted_culture = dalmatian 
		}
		if = {	
			limit = {
				NOT = { accepted_culture = neapolitan }
			}
			add_accepted_culture = neapolitan 
		}
		if = {	
			limit = {
				NOT = { accepted_culture = piedmontese }
			}
			add_accepted_culture = piedmontese 
		}
		if = {	
			limit = {
				NOT = { accepted_culture = umbrian }
			}
			add_accepted_culture = umbrian 
		}
		if = {	
			limit = {
				NOT = { accepted_culture = maltese }
			}
			add_accepted_culture = maltese 
		}
		if = {	
			limit = {
				NOT = { accepted_culture = sicilian }
			}
			add_accepted_culture = sicilian 
		}
		ai_chance = { 
			factor = 100
		}
	}
	option = {
		name = "AIU_EVENT.4B" #Unify the Italians
		add_country_modifier = {
			name = ARA_iberian_italian_union
			duration = -1
		}
		if = {	
			limit = {
				NOT = { accepted_culture = aragonese }
			}
			add_accepted_culture = aragonese 
		}
		if = {	
			limit = {
				NOT = { accepted_culture = catalan }
			}
			add_accepted_culture = catalan 
		}
		custom_tooltip = AIU_italianization_tooltip
		hidden_effect = {
			every_province = { 
				limit = {
					OR = {
						culture = maltese
						culture = sicilian 
						culture = neapolitan
						culture = sardinian
						culture = umbrian
					}
				}
				change_culture = umbrian
			}
			every_province = { 
				limit = {
					culture_group = latin
					NOT = { culture = umbrian }
				}
				change_culture = romagnan
			}
			remove_accepted_culture = maltese
			remove_accepted_culture = sicilian 
			remove_accepted_culture = neapolitan
			remove_accepted_culture = sardinian
			remove_accepted_culture = dalmatian 
			remove_accepted_culture = piedmontese 
			remove_accepted_culture = ligurian 
			remove_accepted_culture = venetian 
			remove_accepted_culture = lombard
			remove_accepted_culture = tuscan 
			add_accepted_culture = umbrian
			add_accepted_culture = romagnan
		}
		ai_chance = { 
			factor = 100
		}
	}
	option = {
		name = "AIU_EVENT.4C" #Italianize the Realm
		trigger = {
			owns = 118
		}
		change_primary_culture = umbrian
		set_capital = 118
		set_government_rank = 3
		add_country_modifier = {
			name = ARA_iberian_italian_union
			duration = -1
		}
		if = {	
			limit = {
				NOT = { accepted_culture = aragonese }
			}
			add_accepted_culture = aragonese 
		}
		if = {	
			limit = {
				NOT = { accepted_culture = catalan }
			}
			add_accepted_culture = catalan 
		}
		ai_chance = { 
			factor = 100
		}
	}
}