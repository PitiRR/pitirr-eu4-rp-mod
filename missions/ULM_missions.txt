ULM_diplomacy = {
	slot = 1
	generic = no
	ai = yes
	potential = {
		tag = ULM
	}
	has_country_shield = yes


	ULM_hre_allies = {
		icon = mission_alliances
		required_missions = { }
		position = 1
		
		trigger = {
			calc_true_if = { # alejandro = god
				amount = 2
				all_countries = {
					is_part_of_hre = yes
					allied_to = ROOT
				}
			}
		}

		effect = {
			add_prestige = 20
			add_country_modifier = {
				name = "regional_diplomacy"
				duration = 9125 #25 years
			}
		}
	}
	
	ULM_imperial_guarantee = {
	icon = mission_monarch_in_throne_room
	required_missions = { ULM_hre_allies }
	position = 2
		
		trigger = {
			calc_true_if = { # alejandro = god
				amount = 1
				OR = {
					alliance_with = emperor
					emperor = {
						owes_favors = { who = ULM value = 10 }
						has_opinion = {
							who = root
							value = 120
						}
					}
				}
			}
		}

		effect = { # replace with event
			add_dip_power = 100
			add_prestige = 20
			add_imperial_influence = 25
			all_countries = {
				is_emperor = yes
				add_splendor = 200
				create_guarantee = ULM
			}
		}
	}

	ULM_swabians_and_the_swiss = {
		icon = mission_italian_condotierre
		required_missions = { ULM_imperial_guarantee }
		position = 4
		
		trigger = {
			army_size_percentage = 0.8
			any_country = {
				rival = ROOT
				OR = {
					primary_culture = swiss
					primary_culture = swabian
				}
			}
		}

		effect = {
			country_event = ULM_zael_event.1
		}
	}
	
	ULM_free_city_guard = {
		icon = mission_lanshknecht_soldier
		required_missions = { ULM_swabians_and_the_swiss ULM_defensive_overhaul }
		position = 6
		
		trigger = {
			army_tradition = 60
			army_professionalism = 20
			OR = { 
				calc_true_if = {
					amount = 1
					any_ally = {
						has_opinion = {
							who = ROOT
							value = 150
						}
						army_professionalism = 40
						OR = {
							primary_culture = swiss
							primary_culture = swabian
						}
					}
				}
				any_country = {
					vassal_of = ROOT
					has_opinion = {
						who = ROOT
						value = 100
					}
					OR = {
						primary_culture = swiss
						primary_culture = swabian
					}
				}
			}
		}
		
		effect = {
			add_mil_power = 300
			add_army_professionalism = 10
			country_event = ULM_zael_event.2
		}
	}
}

ULM_imperial_misc_missions = {
	slot = 2
	generic = no
	ai = yes
	potential = {
		tag = ULM
	}
	has_country_shield = yes
	
	ULM_imperial_bankers = {
		icon = mission_high_income
		required_missions = { ULM_imperial_guarantee }
		position = 3
		
		trigger = {
			diplomatic_reputation = 4
			mercantilism = 15
			OR = {
				ROOT = {
					guaranteed_by = emperor
					NOT = { inflation = 4 }
					monthly_income = 4
				}
				ROOT = {
					NOT = { inflation = 2 }
					monthly_income = 8
				}
			}
		}
		
		effect = {
			country_event = ULM_zael_event.3
			add_mercantilism = 10
			hidden_effect = {
				limit = { guaranteed_by = emperor }
				add_imperial_influence = 20
			}
		}
	}
	
	ULM_defensive_overhaul = {
		icon = mission_conquer_50_development
		required_missions = { ULM_swabians_and_the_swiss ULM_establish_milf }
		position = 5
		
		trigger = {
			OR = { 
				any_ally = {
					primary_culture = swabian
					has_opinion = {
						who = ROOT
						value = 150
					}
					army_tradition = 70
				}
				any_ally = {
					primary_culture = swiss
					has_opinion = {
						who = ROOT
						value = 150
					}
					army_tradition = 70
				}
				any_country = {
					NOT = {
						OR = {
							primary_culture = swiss
							primary_cultre = swabian
						}
					}
				}
			}
            1872 = {
				OR = {
					has_building = fort_15th
					has_building = fort_16th
					has_building = fort_17th
					has_building = fort_18th
				}
            }
			treasury = 1000
		}
		
		effect = {
			treasury = -600
			1872 = {
				add_permanent_province_modifier = {
					name = ULM_defensive_overhaul
					duration = -1
				}
			}
			custom_tooltip = emp_mlo_fortify_alps_effects_tooltip
			hidden_effect = {
				1872 = {
					if = {
						limit = { has_building = fort_17th }
						remove_building = fort_17th
						add_building = fort_18th
					}
					else_if = {
						limit = { has_building = fort_16th }
						remove_building = fort_16th
						add_building = fort_17th
					}
					else_if = {
						limit = { has_building = fort_15th }
						remove_building = fort_15th
						add_building = fort_16th
					}
				}
			}
		}
	}
}

ULM_province_development = {
	slot = 3
	generic = no
	ai = yes
	potential = {
		tag = ULM
	}
	has_country_shield = yes
	
	ULM_a_free_city = {
		icon = mission_early_game_buildings
		required_missions = { }
		position = 1
		
		provinces_to_highlight = {
			province_id = 1872
		}
		
		trigger = {
			1872 = {
				num_of_times_improved = 3
				has_building = temple
			}
		}
		
		effect = {
			add_prestige = 10
			1872 = {
				add_permanent_province_modifier = {
					name = ULM_basic_improvements
				}
			}
		}
	}
	
	ULM_early_municipal_safeguards = {
		icon = mission_colonial
		required_missions = { ULM_a_free_city }
		position = 2
		
		trigger = {
			army_size_percentage = 1
			treasury = 100
		}
		
		effect = {
			treasury = -50
			1872 = {
				add_building = fort_15th
				add_permanent_province_modifier = {
					name = ULM_defensive_safeguards
				}
			}
		}
	}
	
	ULM_hundred_year_plans = {
		icon =
		required_missions = { ULM_early_municipal_safeguards }
		position = 3
		
		trigger = {
		
		}
		
		effect = {
		
		}
	}
	
	ULM_establish_milf = {
		icon = 
		required_missions = { ULM_imperial_bankers ULM_hundred_year_plans ULM_scriveners }
		position = 4
		
		trigger = {
		
		}
		
		effect = {
		
		}
	}
}